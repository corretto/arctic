/*
 *   Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
 *
 *   Licensed under the Apache License, Version 2.0 (the "License").
 *   You may not use this file except in compliance with the License.
 *   You may obtain a copy of the License at
 *
 *       http://www.apache.org/licenses/LICENSE-2.0
 *
 *   Unless required by applicable law or agreed to in writing, software
 *   distributed under the License is distributed on an "AS IS" BASIS,
 *   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 *   See the License for the specific language governing permissions and
 *   limitations under the License.
 */

sourceCompatibility = JavaVersion.VERSION_11
project.buildDir = file("$rootDir/build/${project.name}/")

jar {
    duplicatesStrategy = DuplicatesStrategy.EXCLUDE // allow duplicates
    archiveBaseName.set('arctic-player')
    manifest.attributes(
            'Implementation-Title': 'arctic-player',
            'Implementation-Vendor': 'Amazon Corretto Team',
            'Implementation-Version': getArchiveVersion()
    )
    destinationDirectory = file("$rootDir/build/libs/")
}

test {
    useJUnitPlatform {
        excludeTags 'ManualTests'
    }
}

dependencies {
    implementation project(':common')

    testImplementation group: 'org.mockito', name: 'mockito-core', version: '3.7.7'
    testImplementation group: 'org.mockito', name: 'mockito-junit-jupiter', version: '3.7.7'
    testImplementation 'org.junit.jupiter:junit-jupiter-api:5.7.1'
    testImplementation 'org.junit.jupiter:junit-jupiter-params:5.7.1'
    testRuntimeOnly 'org.junit.jupiter:junit-jupiter-engine:5.7.1'
}
